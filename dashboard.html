
<!DOCTYPE html>
<html>
<head><title>Dashboard</title></head>
<body>
  
  <button id="logoutBtn">Logout</button>

  <div id="binData"></div>

  <script type="module" src="dashboard.js">
    import { auth, db } from "./firebase.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Auth check
    onAuthStateChanged(auth, user => {
      if (!user) {
        window.location.href = "LoginPage.html"; // redirect if not logged in
      }
    });

    // Logout
    document.getElementById("logoutBtn").onclick = () => {
      signOut(auth);
      window.location.href = "LoginPage.html";
    };

    // Sample: Read bins data
    async function loadBins() {
      const querySnapshot = await getDocs(collection(db, "bins"));
      let html = "<h3>Bin Reports</h3><ul>";
      querySnapshot.forEach(doc => {
        const d = doc.data();
        html += `<li>${d.binId} - Status: ${d.status} - Location: ${d.location.lat},${d.location.lng}</li>`;
      });
      html += "</ul>";
      document.getElementById("binData").innerHTML = html;
    }

    loadBins();
  </script>
</body>
</html>
